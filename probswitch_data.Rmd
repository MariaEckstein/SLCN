---
title: "Prob switch analyses"
output: html_notebook
---

# Set up parameters

```{r Set up parameters}
for (learning_style in c("RL")) {#, "Bayes"
  for (method in c("direct")) {#, "softmax", "epsilon-greedy"
    for (param_name in c("_vary_alpha", "_vary_beta", "_vary_epsilon", "_vary_perseverance", "_vary_decay", "_fit_alphabetaepsilonperseverancedecay", "_fit_alpha", "_fit_beta", "_fit_epsilon", "_fit_perseverance", "_fit_decay")) {
      print(paste(learning_style, method, param_name))
      
      data = paste(learning_style, "/", method, param_name, sep = "")
      # data = "human"
      data_dir = ifelse(data == "human", "C:/Users/maria/MEGAsync/SLCNdata/PSResults", paste("C:/Users/maria/MEGAsync/SLCNdata/", data, sep = ""))
      
      # data_dir = 'C:/Users/maria/MEGAsync/SLCNdata/RL_playingwithlimits/direct_fit_alphabetaepsilonperseverancedecay'
      
      plot_dir = file.path(data_dir, "plots")
      gg_save = T
      unlink(plot_dir, recursive=TRUE)
      dir.create(plot_dir)
      
      library("ggplot2"); theme_set(theme_bw())
      library("plyr")
      library("R.matlab")
      library("reshape2")
      source("functions.R")
      
      all_files = read_in_files()
      if (dim(all_files)[1] > 0) {
        all_files_sum = ddply(subset(all_files, !is.na(outcome_12_back)),
                              .(sID, outcome_12_back, choice_12_back), summarize,
                              choice = mean(choice_left, na.rm = T))
        all_files_sum2 = ddply(subset(all_files, !is.na(trialsinceswitch)),
                              .(sID, trialsinceswitch), summarize,
                              choice = mean(choice_left, na.rm = T),
                              RT = median(RT, na.rm = T))
        paper_plots()
        
        if (data != "human") {
          model_plots()
          if (grepl("fit", param_name)) {
            genrec_plots()
          }
        }
      }
    }
  }
}
```
